{% extends 'base.html.twig' %}

{% block title %}
    {% if singleCategory %}
        {{ category.name }} Quiz
    {% else %}
        All Categories Quiz
    {% endif %}
{% endblock %}

{% block stylesheets %}
    {{ parent() }}
{% endblock %}

{% block body %}
    <div class="quiz-container">
        <a href="{{ path('quiz_index') }}" class="back-link">‚Üê Back to Categories</a>

        <div class="header">
            <h1>
                {% if singleCategory %}
                    {{ category.name }} Quiz
                {% else %}
                    Symfony 7.0 Quiz - All Categories
                {% endif %}
            </h1>
            <p>Answer the following questions to test your knowledge</p>
            <p class="quiz-instructions"><strong>Note:</strong> Some questions may have multiple correct answers. Select all that apply.</p>
        </div>

        {% if questions|length > 0 %}
            <form action="{{ path('quiz_submit') }}" method="post" data-turbo="false">
                {% if singleCategory %}
                    <input type="hidden" name="category_id" value="{{ category.id }}">
                {% endif %}
                {% for question in questions %}
                    <div class="question-card">
                        {% if not singleCategory %}
                            <div class="category-label">{{ question.category.name }}</div>
                        {% endif %}
                        <div class="question-text">{{ question.text|nl2br }}</div>

                        {% for answer in question.answers %}
                            <div class="answer-option">
                                <input type="checkbox" id="answer-{{ question.id }}-{{ answer.id }}"
                                       name="answers[{{ question.id }}][]" value="{{ answer.id }}">
                                <label for="answer-{{ question.id }}-{{ answer.id }}">{{ answer.text }}</label>
                            </div>
                        {% endfor %}
                    </div>
                {% endfor %}

                <button type="submit" class="btn-submit">Submit Answers</button>
            </form>
        {% else %}
            <p>No questions available for this quiz.</p>
        {% endif %}
    </div>
{% endblock %}
